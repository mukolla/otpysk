<?php

 class Application_Models_userdb extends Lib_connecteddb
  {
	  function _get_all_user_db(){
		
		$db = $this->connect();
		$result = $db->prepare("SELECT * FROM user");
		$result->execute();

		while ($row = $result->fetch(PDO::FETCH_ASSOC)){
			$data[] = $row;
		}
		return $data;
	  }



	function _set_user_update($post=null){

		$db = $this->connect();
		
		if (!$post){
			$result = $db->prepare("UPDATE `user` SET `last_activ_date`=:date WHERE `user_id`=:user_id");
			
			$date[':user_id']= $_SESSION['user_id'];
			$date[':date']= date("m.d.Y g:i");
		}else{
			$result = $db->prepare("UPDATE `user` SET `user_name`=:user_name, `pass`=:pass, `mail`=:mail, `user_status`=:user_status, `first_name`=:first_name, `last_name`=:last_name, `img_avatar`=:img_avatar WHERE `user_id`=:user_id");

			foreach ($post as $key=>$val){
				$date[':'.$key] = $val;
			}
			//print_r($date); exit;
		}

		return $result->execute($date);
	  }

/*
	$date['user_name']=$post['user_name'];
	$date['pass']=$post['pass'];
	$date['mail']=$post['mail'];
	$date['user_status']=$post['user_status'];
	$date['first_name']=$post['first_name'];
	$date['last_name']=$post['last_name'];
	$date['img_avatar']=$post['img_avatar'];
	$date['user_id']=$post['user_id'];
	*/
  }